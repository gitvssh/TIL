간단한 쇼핑몰 사이트 구축
=========================
1. 기능 정의

사용자
-로그인/로그아웃
-회원가입 및 수정

-상품목록
-상품 상세보기
-장바구니에 상품담기
-상품 구매(주문하기)
-구매목록 보기
==========================

DB 작업

mysql\bin>mysql -u root -p
12345

(DB변경시 데이터풀 설정 변경방법 : meta-inf->context->url 경로 수정)
create database shopdb;
use shopdb;

create table shop_info(
pro_no int(5) not null auto_increment,
code varchar(10) not null,
name varchar(20) not null,
price int(5) not null,
stock int(5),
detail varchar(4000),
comp varchar(20),
regdate datetime,
image varchar(30),
primary key(pro_no)
);

pro_no 상품번호(일련번호)
code 상품코드
name 상품이름
price 상품가격
stock 물량,보유수량
detail 설명
comp 제조회사
regdate 상품등록날짜
image 상품이미지 이름
primary key(pro_no);

WebContent/imgs/

code : O001
상품이름 : 철광석
가격 : 5000
stock : 10
detail : The company has emerged as a highly reliable and distinguished Manufacturer and Supplier of Iron Ore in Nagpur. The Iron Ore is available in different grades which range from 45% to 65% of iron (Fe) content. The wide usage and unmatched quality of the Iron Ore Lumps makes them a widely demanded product.
comp : K.S.Enterprise
regdate : 2013


code : O002
상품이름 : 금광석
가격 : 400000
stock : 10
detail : This spectacular piece of raw gold in quartz was found just recently by a miner in Siskiyou County, California. This is a stunning example of high-grade gold ore, with thick pieces of gold visible all throughout the quartz. This is the type of gold that brought the '49ers to California in search of wealth. A fantastic example of raw gold in quartz from California. The total weight of this piece is 21.55 grams.
comp : GoldRushNuggets
regdate : 2013

code : O003
상품이름 : 은광석
가격 : 54000
stock : 10
detail : Galena is one of the most abundant and widely distributed sulfide minerals. It crystallizes in the cubic crystal system often showing octahedral forms. It is often associated with the minerals sphalerite, calcite and fluorite.
 comp : GreenCrossToad
regdate : 2013

code : O004
상품이름 : 구리
가격 : 820
stock : 10
detail : Good Quality 10% - 13% Copper Ore in Lumps. Size: 3-300mm. We can supply good quality Copper Ore Lumps in bulk quantities. We do our own mining.
comp : ChemExchangeLimited
regdate : 2013

code : O00005
상품이름 : 주석
가격 : 19278
stock : 10
detail : Tin is obtained chiefly from the mineral cassiterite and commonly used in solder, tin plating, tin chemicals, brass and bronze alloys, and niche uses.
comp : iddnreliance
regdate : 2013

insert into shop_info values(0,'O001','철광석',5000,10,'The company has emerged as a highly reliable and distinguished Manufacturer and Supplier of Iron Ore in Nagpur. The Iron Ore is available in different grades which range from 45% to 65% of iron (Fe) content. The wide usage and unmatched quality of the Iron Ore Lumps makes them a widely demanded product.','K.S.Enterprise','2013-01-01','o001.jpg');
insert into shop_info values(0,'O002','금광석',400000,10,'This spectacular piece of raw gold in quartz was found just recently by a miner in Siskiyou County, California. This is a stunning example of high-grade gold ore, with thick pieces of gold visible all throughout the quartz. This is the type of gold that brought the 49ers to California in search of wealth. A fantastic example of raw gold in quartz from California. The total weight of this piece is 21.55 grams.','GoldRushNuggets','2013-01-01','o002.jpg');
insert into shop_info values(0,'O003','은광석',54000,10,'Galena is one of the most abundant and widely distributed sulfide minerals. It crystallizes in the cubic crystal system often showing octahedral forms. It is often associated with the minerals sphalerite, calcite and fluorite.','GreenCrossToad','2013-01-01','o003.jpg');
insert into shop_info values(0,'O004','구리',820,10,'Good Quality 10% - 13% Copper Ore in Lumps. Size: 3-300mm. We can supply good quality Copper Ore Lumps in bulk quantities. We do our own mining.','ChemExchangeLimited','2013-01-01','o004.jpg');
insert into shop_info values(0,'O005','주석',19278,10,'Tin is obtained chiefly from the mineral cassiterite and commonly used in solder, tin plating, tin chemicals, brass and bronze alloys, and niche uses.','iddnreliance','2013-01-01','o005.jpg');

================================================

@ src/shopdb.ProductDto.java(모델빈 = DTO)
@ src/shopdb.ProductMgr.java(비지니스 로직 = DAO)

@ WebContent
	shop 폴더 만들고
	
		script.js
		style.css

		Top.jsp
		Bottom.jsp
		
		Login.jsp
		LoginProc.jsp
		Index.jsp
		LogOut.jsp
		
		LogErr.jsp
		ProductList.jsp =>상품목록 보기
		ProductDetail.jsp => 상세보기

현재경로 <%=request.getContextPath()%>
<img src="<%= request.getContextPath()%>/imgs/<%=dto.getImage()%>" wdth~~>

이미지파일을 가져올때 사용
컨텍스트 경로(웹경로):<%= request.getContextPath()%>

이미지 파일 파일 업로드 할때 사용
실제경로 : <%=config.getServletConetext().getRealPath("/")%>			

==================================
shop_order 주문 테이블
==================================
use shopdb;

drop table shop_order;

create table shop_order(
ordno int(5) not null auto_increment,
pro_no int(5) not null,
quantity varchar(10) not null,
orddate datetime,
state varchar(10),
userid varchar(10),
primary key (ordno)
);

설명=====
ordno 주문번호
pro_no 상품번호
quantity 주문수량

orddate 주문날짜
state 상태(1.주문,3배송..)
userid 주문회원 id


----------------
shopdb.OrderDto.java
shopdb.CartMgr.java

흐름
ProductDetail.jsp-->CartProc.jsp
-->CartList.jsp(장바구니 내용 보기)

2018-10-08
shopdb.ProductMgr.java(남은물량 계산)
shopdb.OrderMgr.java(주문처리 DAO)

-->CartList.jsp-->
OrderProc.jsp
OrderList.jsp(주문 목록 리스트)


WebContent
	admin 폴더
	
use shopdb;

Table 작성
-----------------------------------
create table admin(
admin_id varchar(20) not null,
admin_pwd varchar(20) not null,
primary key (admin_id)
);	
----------------------------------
WebContent
	admin 폴더
		AdminLogin.jsp
		AdminLoginProc.jsp
		AdminLogout.jsp
		
		Top.jsp
		Bottom.jsp
		Index.jsp
		
		script.js
		style.css
		
ProductMgr.java(관리자)

상품등록
public boolean insertProduct(HttpServletRequest req)

상품업데이트
public boolean updateProduct(HttpsServletRequest req)

상품삭제
public boolean deleteProduct(String no)
--------------------------------------------
ProductList.jsp 상품목록
ProductInsertForm.jsp 상품등록 폼=>ProductProc.jsp 상품등록

ProductUpdate.jsp 수정/삭제 =>ProductProc.jsp 상푸믕록, 수정, 삭제
ProductDetail.jsp 상세보기
ProductDetail.jsp 수정/삭제